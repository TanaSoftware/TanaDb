
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    
    <title>TanaSoftware</title>
    <style>
        .tooltip-inner {
            background-color: #f00 !important;
        }

        .btn {
            background: #33a6cc;
            box-shadow: 1px;
            color: #ffffff;
        }

        @media only screen and (max-width: 760px) {

            input[type=checkbox] {
                /* Double-sized Checkboxes */
                -ms-transform: scale(1.5); /* IE */
                -moz-transform: scale(1.5); /* FF */
                -webkit-transform: scale(1.5); /* Safari and Chrome */
                -o-transform: scale(1.5); /* Opera */
                transform: scale(1.5);
                padding-left: 20px !important;
            }
        }

        .checkbox-inline {
            padding-left: 5px !important;
        }
    </style>
</head>
<body dir="rtl" id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="top">
    
    <nav class="navbar navbar-unibody navbar-custom navbar-fixed-top navbar-onepage">
        <div class="container">
            <div class="navbar-header">
                <button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button><a id="dvUserLoggedIn"></a><a href="#page-top" class="navbar-brand page-scroll">
                    <img src="img/Tana1.png" alt="Logo" class="logo"><img src="img/Tana2.png" alt="Logo" class="logodark">
                </a>
            </div>

            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <li class="hidden"><a href="#page-top"></a></li>
                    
                    <li><a href="#contact" class="page-scroll">צור קשר</a></li>
                    
                    <li><a href="#LoginSec" class="page-scroll">התחבר</a></li>
                    <li><a href="#RegisterCustomer" class="page-scroll">הרשמה</a></li>
                    <li><a href="#Register" class="page-scroll">הרשמה של בעל עסק</a></li>
                    <li><a href="#page-top" class="page-scroll">דף הבית</a></li>
                    
                </ul>
            </div>
        </div>
    </nav>

    <header id="Carousel-intro" data-ride="carousel" class="intro carousel carousel-big slide carousel-fade">
        <ol class="carousel-indicators">
            <li data-target="#Carousel-intro" data-slide-to="0" class="active"></li>
            <li data-target="#Carousel-intro" data-slide-to="1"></li>
            <li data-target="#Carousel-intro" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="item active">
                <div style="background-image:url(img/f.jpg)" class="fill">
                    <div class="intro-body">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-10 col-lg-offset-1">
                                    <h1>ברוכים הבאים למערכת ניהול תורים של</h1>
                                    <h1><span id="spnBizName"></span></h1>
                                    <h1>הרשם עכשיו וחסוך לך זמן יקר</h1>
                                    <a class="btn btn-blue btn-lg page-scroll wow fadeInLeft" href="#Register">לחץ כאן להרשמה</a> 
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="item">
                <div style="background-image:url(img/f.jpg)" class="fill">
                    <div class="intro-body">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-10 col-lg-offset-1">
                                    <h1>זמן תור</h1>
                                    <h1>מכל מקום</h1>
                                    <a class="btn btn-blue btn-lg page-scroll wow fadeInLeft" href="#Register">לחץ כאן להרשמה</a> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="item">
                <div style="background-image:url(img/f.jpg)" class="fill">
                    <div class="intro-body">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-10 col-lg-offset-1">
                                    <h1>מערכת לזימון תורים</h1>
                                    <h1>לכל עסק</h1>
                                    <a class="btn btn-blue btn-lg page-scroll wow fadeInLeft" href="#Register">לחץ כאן להרשמה</a> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <a href="#Carousel-intro" data-slide="prev" class="left carousel-control"><span class="icon-prev"></span></a><a href="#Carousel-intro" data-slide="next" class="right carousel-control"><span class="icon-next"></span></a>
    </header>

    
        <section id="LoginSec" style="padding-top:130px;padding:10px;">

            <div class="container">

                <div class="row">

                    <div class="">

                        <div style="text-align:right;font-weight:bold;">כניסה: </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="emailLogin" type="email" placeholder="מייל" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="passwordLogin" type="password" placeholder="סיסמה" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group" style="text-align:right">

                            <label>זכור אותי</label>

                            <label>

                                <input type="checkbox">

                            </label>

                        </div>

                        <div style="float:left;padding-left:20px;">

                            <div id="dvProgBar" style="text-align:center;display:none;"><img src="css/ProgressBlue.gif" /></div>

                            <button onClick="Login();" class="btn btn-blue btn-lg">כניסה</button>

                        </div>

                    </div>

                </div>

            </div>

        </section>

        <section id="RegisterCustomer" style="padding-top:100px;padding:10px;">

            <div class="container">

                <div class="row">

                    <div class="">

                        <div style="text-align:right;font-weight:bold;">רישום משתמש: </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="userCust" type="text" placeholder="שם משתמש" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class=& quot;form-group floating-label-form-group controls">

                                <input id="txtTelCust" type="text" placeholder="טלפון נייד" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="emailCustomer" type="email" placeholder="מייל" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="passwordCustomer" type="password" placeholder="סיסמה" class="form-control input-lg" />

                            </div>

                        </div>



                        <div style="float:left;padding-left:20px;">

                            <div id="dvProgBar" style="text-align:center;display:none;"><img src="css/ProgressBlue.gif" /></div>

                            <div id="dvErrRegister"></div>

                            <button onClick="RegisterCustmer();" class="btn btn-blue btn-lg">הרשמה</button>

                        </div>

                    </div>

                </div>

            </div>

        </section>

  
   
        <!-- Footer Section-->
        <div class="container-fluid footer-small bg-gray text-center" style="padding:10px;">
            <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <p data-wow-iteration="999" data-wow-duration="5s" class="wow flash"><a href="#page-top" class="page-scroll"><i class="icon ion-ios-arrow-up fa-2x"></i></a></p>

                    <p class="small"><a href="http://TanaSoftware.COM">©2017 TanaSoftware</a> </p>
                </div>
            </div>
        </div>

    
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/device.min.js"></script>
    <script src="js/form.min.js"></script>
    <script src="js/jquery.placeholder.min.js"></script>
    <script src="js/jquery.shuffle.min.js"></script>
    <script src="js/jquery.parallax.min.js"></script>
    <script src="js/jquery.circle-progress.min.js"></script>
    <script src="js/jquery.swipebox.min.js"></script>
    <script src="js/smoothscroll.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/selectize.js"></script>
    <script src="js/global.js"></script>
    <script src="https://www.negishim.com/accessibility/accessibility_pro.js" type="text/javascript"></script>
</body>
</html>
<script>
    accessibility_rtl = false;
    pixel_from_side = 10;
    pixel_from_start = 80;
    is_set_for_mobile = 1;



    function SendMail() {
        var sName = $("#iname").val();
        var sMsg = $("#message").val();
        var sEmail = $("#iemail").val();
        var sPhone = $("#phone").val();
        $("#dvErrMail").html("");
        if (sName.length <= 0) {
            showTooltip("iname", "נא להזין שם");            
            return;
        }
        if (sEmail.length <= 0) {
            showTooltip("iemail", "נא להזין מייל");           
            return;
        }
        if (!IsvalidEmail(sEmail)) {
            showTooltip("iemail", " נא להזין מייל תקין");
            return;
        }
        if (sMsg.length <= 0) {
            showTooltip("message", "נא להזין מלל");            
            return;
        }
        showProgressBar(true);
        var Obj = {
            name: sName,
            Msg: sMsg,
            email: sEmail,
            phone: sPhone
        }
        $.ajax({
            url: "Mail/PostEmail",
            type: 'POST',
            data: JSON.stringify(Obj),
            contentType: "application/json;charset=utf-8",
            success: function (data) {
                $("#dvErrMail").html("Email succesfuley sent.");
                showProgressBar(false);
            },
            error: function (request, status, error) {
                $("#dvErrMail").html("Email failed sent.");
                showProgressBar(false);
            }
        });
    }

    function showProgressBar(isShow) {
        if (isShow)
            $("#dvProgBar").show();
        else
            $("#dvProgBar").hide();
    }


    function Register() {



        var user = $("#name").val();

        var password = $("#password").val();

        var email = $("#email").val();

        var bizName = $("#bizName").val();

        var bizNameEng = $("#bizNameEng").val();

        var creditCard = $("#creditCard").val();

        var address = $("#address").val();

        var city = $("#city").val();

        var tel = $("#txtTel").val();



        $("#spnActiveDays").text("");



        if (user.length <= 0) {

            showTooltip("name", "נא להזין שם");

            return;

        }



        if (password.length <= 0) {

            showTooltip("password", "נא להזין סיסמה");

            return;

        }



        if (password.length < 8) {

            showTooltip("password", "נא להזין לפחות 8 תווים");

            return;

        }

        if (email.length <= 0) {

            showTooltip("email", "נא להזין מייל");

            return;

        }

        if (tel.length <= 0) {

            showTooltip("txtTel", "נא להזין מספר טלפון נייד");

            return;

        }

        if (!IsvalidEmail(email)) {

            showTooltip("email", "נא להזין מייל תקין");

            return;

        }



        if (bizName.length <= 0) {

            showTooltip("bizName", "נא להזין שם עסק");

            return;

        }



        if (bizNameEng.length <= 0) {

            showTooltip("bizNameEng", "נא להזין שם עסק באנגלית");

            return;

        }



        if (creditCard.length <= 0) {

            showTooltip("creditCard", "נא להזין כרטיס אשראי ");

            return;

        }



        if (address.length <= 0) {

            showTooltip("address", "נא להזין כתובת");

            return;

        }



        if (city == "0") {

            showTooltip("city", "נא להזין עיר");

            return;

        }


        //var bizType = BizType


        if (!NoneHours) {

            txtfromHourNone = "";

            txttoHourNone = "";

        }
        var UserActivitiesDiv = $("#UserActivities").html();
        if (UserActivitiesDiv.length == 0) {
            showTooltip("BizType", "נא להזין סוג פעילות");
        }

        if (isEmptyObject(ActivitiesData)) {

            showTooltip("EmployeeName", "נא להזין שם עובד")

            return;

        }


        var userObj = {

            User: user,

            Password: password,

            Email: email,

            tel: tel,

            BizName: bizName,

            BizNameEng: bizNameEng,

            Adrress: address,

            City: city,

            Country: "Israel",

            CreditCard: creditCard,

            dicBizType: ActivitiesData,
            UserActivities: ActivitiesUserData
        }



        $.ajax({

            url: "User/Register",

            type: 'POST',

            data: JSON.stringify(userObj),

            contentType: "application/json;charset=utf-8",

            success: function (data) {

                if (data.ErrorMsg == null || data.ErrorMsg == "")

                    messageHandler.Show("נשלח אליך מייל, אנא לחץ על הקישור עלמנת להתחבר למערכת.");

                else

                    messageHandler.Show(data.ErrorMsg);

            },

            error: function (request, status, error) {



            }

        });





    }



    function EnableNoneActiveHours(obj) {

        if (obj.checked) {

            $("#txtfromHourNone").removeAttr("disabled");

            $("#txttoHourNone").removeAttr("disabled");

        }

        else {

            $("#txtfromHourNone").attr("disabled", "disabled");

            $("#txttoHourNone").attr("disabled", "disabled");

        }



    }



    function init() {


        var city, BizName = "";
        var id = location.search;
        id = id.split('=')[1];
        
        $.ajax({

            url: "User/GetUserBiz/" + id,

            type: 'GET',         

            contentType: "application/json;charset=utf-8",

            success: function (data) {
                
                $('#spnBizName').text(data.User);

            },

            error: function (request, status, error) {
                


            }

        });
    }



    var ActivitiesData = {};
    var ActivitiesUserData = {};


    function GetBizTypeItem() {

        return { EmployeeId: 0, ActiveDay: 0, EmployeeName: "", ActiveHourFrom: "", ActiveHourTo: "", ActiveHourFromNone: "", ActiveHourToNone: "" };

    }



    function checkValid(txtId, textMsg) {

        $('#' + txtId).tooltip('hide');

        var txt = $("#" + txtId).val();

        if (txt.length <= 0) {

            //showTooltip(txtId, textMsg);

            $('#' + txtId).tooltip({

                title: textMsg

            });

            $('#' + txtId).tooltip('show');

            $('#' + txtId).focus();

            return false;

        }

        return true;

    }



    function checkValidDDl(txtId, textMsg) {

        $('#' + txtId).tooltip('hide');

        var txt = $("#" + txtId).val();

        if (txt == "0" || txt == "") {

            //showTooltip(txtId, textMsg);

            $('#' + txtId).tooltip({

                title: textMsg

            });

            $('#' + txtId).tooltip('show');

            $('#' + txtId).focus();

            return false;

        }

        return true;

    }



    function checkHour(txtId, textMsg) {

        $('#' + txtId).tooltip('hide');

        if (!isHour($("#" + txtId).val())) {

            $('#' + txtId).tooltip({

                title: textMsg

            });

            $('#' + txtId).tooltip('show');

            $('#' + txtId).focus();

            return false;

        }

        return true;

    }
    var ActivityCounter = 1;
    function AddActivity() {

        var data = "";

        var ActivitiesTempData = new Array();

        if (!checkValid("EmployeeName", "נא להזין שם עובד")) {

            return;

        }

        for (var i = 1; i <= 2; i++) {

            var id = i.toString();

            var Day = document.getElementById('Day' + id).checked;


            if (Day) {



                if (!checkValid("txtfromHour" + id, "נא להזין משעה")) {

                    return;

                }

                if (!checkHour("txtfromHour" + id, "שעה לא חוקית")) {

                    return;

                }

                if (!checkValid("txttoHour" + id, "נא להזין עד שעה")) {

                    return;

                }

                if (!checkHour("txttoHour" + id)) {

                    return;

                }

                var item = GetBizTypeItem();

                item.EmployeeId = ActivityCounter;
                item.EmployeeName = $('#EmployeeName').val();

                item.ActiveDay = id;

                //item.ActiveDuration = $('#ddlDuration' + id).val();

                item.ActiveHourFrom = $('#txtfromHour' + id).val();

                item.ActiveHourTo = $('#txttoHour' + id).val();

                item.ActiveHourFromNone = $('#txtfromHourNone' + id).val();

                item.ActiveHourToNone = $('#txttoHourNone' + id).val();

                ActivitiesTempData.push(item);
            }

        }

        if (ActivitiesData[item.EmployeeName] == null) {

            var index = ActivitiesData.length;

            ActivitiesData[item.EmployeeName] = ActivitiesTempData;

            data = "<div style='width:100%;' id='dvBizType" + item.EmployeeName + "'><div style='float:right;width:260px;padding-right:20px;'>" + item.EmployeeName + "</div><button style='float:right;marging-right:4px;' onclick=deleteBizType('" + item.EmployeeName + "')>מחק</button></div>";

            var newDiv = $("#Activities").html();

            ActivityCounter++;

            $("#Activities").html(newDiv + data);

            $('#EmployeeName').val("");

        }

    }



    function deleteBizType(i) {

        delete ActivitiesData[i];

        $('#dvBizType' + i).remove();

    }



    function isEmptyObject(obj) {

        for (var name in obj) {

            return false;

        }

        return true;

    }



    

    function RegisterCustmer() {

        var user = $("#userCust").val();

        var password = $("#passwordCustomer").val();

        var email = $("#emailCustomer").val();

        var txtTelCust = $("#txtTelCust").val();

        if (email.length <= 0) {

            showTooltip("emailCustomer", "נא להזין מייל");

            return;

        }

        if (user.length <= 0) {

            showTooltip("userCust", "נא להזין שם");

            return;

        }

        if (txtTelCust.length <= 0) {

            showTooltip("txtTelCust", "נא להזין טלפון נייד");

            return;

        }

        if (!IsvalidEmail(email)) {

            showTooltip("emailCustomer", "נא להזין מייל תקין");

            $("#emailCustomer").val("");

            return;

        }

        if (password.length <= 0) {

            showTooltip("passwordCustomer", "נא להזין סיסמה");

            return;

        }



        if (password.length < 8) {

            showTooltip("passwordCustomer", "נא להזין לפחות 8 תווים");

            $("#passwordCustomer").val("");

            return;

        }



        var userObj = {

            Name: user,

            Password: password,

            tel: txtTelCust,

            Email: email

        }

        $.ajax({

            url: "User/RegisterCustmer",

            type: 'POST',

            data: JSON.stringify(userObj),

            contentType: "application/json;charset=utf-8",

            success: function (data) {

                if (data.ErrorMsg != "")

                    messageHandler.Show("נשלח אליך מייל, אנא לחץ על הקישור עלמנת להתחבר למערכת.");

            },

            error: function (request, status, error) {



            }

        });

    }

    init();

    


    function AddUserActivity() {

        var data = "";

        var ActivitiesTempData = new Array();
        var bizType = $('#BizType').val();
        if (bizType.length == 0) {
            showTooltip("BizType", "נא להזין שם פעילות");
            return;
        }

        if (!checkValidDDl("ddlDuration", "נא להזין משך פעילות")) {
            return;
        }
        if (ActivitiesUserData[bizType] == null) {

            ActivitiesUserData[bizType] = $('#ddlDuration').val();

            data = "<div style='width:100%;' id='dvBizTypeAct" + bizType + "'><div style='float:right;width:260px;padding-right:20px;'>" + bizType + " למשך  " + ActivitiesUserData[bizType] + " דקות</div><button style='float:right;marging-right:4px;' onclick=deleteBizTypeActivity('" + bizType + "')>מחק</button></div>";

            var newDiv = $("#UserActivities").html();

            $("#UserActivities").html(newDiv + data);
            $('#BizType').val("");
        }

    }
    function deleteBizTypeActivity(i) {
        delete ActivitiesUserData[i];

        $('#dvBizTypeAct' + i).remove();

    }
</script>