<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css?v=24" rel="stylesheet">
    <link href="css/selectize.css" rel="stylesheet" />
    <title>TanaSoftware</title>
    <style>
        .footer {
            position: absolute;
            bottom: 0;
            padding: 1rem;
            width: 100%;
        }

        .fullHeight {
            height: 100%;
        }

        .hour {
            width: 70px;
        }

        .tooltip-inner {
            background-color: #f00 !important;
        }

        .btn {
            background: #33a6cc;
            box-shadow: 1px;
            color: #ffffff;
        }

        @media only screen and (max-width: 760px) {
            #picblock {
                height: 32px;
                margin-top: 10px;
            }

            .btn-lg {
                padding: 2px;
            }
        }

        .checkbox-inline {
            padding-left: 5px !important;
        }
    </style>
</head>
<body dir="rtl" id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="top">

    <nav class="navbar navbar-unibody navbar-custom navbar-fixed-top navbar-onepage">
        <div class="">
            <div class="navbar-header">
                <button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button><a id="dvUserLoggedIn"></a><a href="#page-top" class="navbar-brand page-scroll">
                    <img id="logo1" src="img/Tana1.png" style="width:90px;height:22px; margin-top:12px;margin-left:30px;" alt="Logo" class="logo">
                    <img id="logo2" src="img/Tana2.png" style="width:100px;margin-top:12px;margin-left:30px;" alt="Logo" class="logodark">
                </a>
            </div>

            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#page-top" class="page-scroll">דף הבית</a></li>
                    <li><a href="#" onclick="javascript:goToCustomer('LoginSec')" class="page-scroll">כניסת משתמש</a></li>
                    <li><a href="#" onclick="javascript:goToCustomer('RegisterCustomerX')" class="page-scroll">משתמש חדש</a></li>
                    <li><a href="#" onclick="javascript:goToRegisterBiz('Register')" class="page-scroll">בעל עסק חדש</a></li>
                    <li><a href="#" onclick="javascript: goToUrl('Contact.html')" class="page-scroll">צור קשר</a></li>
                    <li><a href="#" onclick="javascript: goToUrl('About.html')" class="page-scroll">אודות</a></li>
                </ul>
            </div>

        </div>
    </nav>

    <header id="Carousel-intro" data-ride="carousel" class="intro carousel carousel-big slide carousel-fade">

        <div id="LoginSec" class="carousel-inner">
            <div class="item active">
                <div id="dvBackImage" style="background-image:url(img/f3.jpg);" class="fill">
                    <div class="toriImg2"></div>
                    <div class="MainLabel2"> התור שלך בקליק</div>
                    <div class="intro-body">
                        <div class="container">
                            <div class="row">
                                <div class="toriImg"></div>
                                <div class="MainLabel"> התור שלך בקליק</div>
                                <div style="right:5px;" class="clock"></div>
                                <div id="dvLogin" class="col-lg-10 col-lg-offset-1" style="padding-top:30px;">
                                    <form action="javascript:return LoginMe();">
                                        <div class="container" style="margin-top:20px;overflow-y: auto;">
                                            <div class="row" style="padding-right:45px;padding-left:45px;">
                                                <div class="form-group">

                                                    <div class="form-group floating-label-form-group controls">

                                                        <input style="width:100%" id="emailLogin" tabindex="2" type="email" placeholder="מייל" class="text-line" />

                                                    </div>

                                                </div>

                                                <div class="form-group">

                                                    <div class="form-group floating-label-form-group controls">

                                                        <input style="width:100%" id="passwordLogin" tabindex="3" type="password" placeholder="סיסמה" class="text-line" />

                                                    </div>

                                                </div>
                                                <div id="dvForgutPass">
                                                    <div style="font-size:11px;width:100%;">

                                                        <span id="dvRememberMe1" style="margin-top:2px;float:right">זכור אותי</span>

                                                        <span id="dvRememberMe2" style="margin-right:4px;float:right">

                                                            <input tabindex="4" id="remember_me" class="chk" type="checkbox">

                                                        </span>
                                                        <span id="spnForgutPass" style="color:#ffffff;cursor:pointer;text-align:left" onclick="forgetPassword()">שכחתי סיסמה</span>
                                                    </div>
                                                </div>
                                                <div style="clear:both">

                                                    <button id="btnLogin" style="width:100%;margin-top:30px;font-size:14px;font-weight:bold;" tabindex="5" onclick="LoginMe();" class="btn round btn-w btn-lg">כניסה</button>

                                                </div>
                                                <div id="dvNewClient">
                                                    <div style="padding-top:20px;">
                                                        <a style="text-decoration: underline;" href="javascript:goToCustomer('RegisterCustomerX')">משתמש חדש</a>
                                                    </div>
                                                    <div style="padding-top:10px;">
                                                        <a style="text-decoration: underline;" href="javascript:goToRegisterBiz('Register')">בעל עסק חדש</a>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </form>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

    </header>


    <section class="fullHeight" id="RegisterCustomerX" style="padding:10px;">

        <div id="dvRegisterCustomerX" class="container" style="margin-top:80px;padding-bottom:100px;">

            <div class="row">

                <div class="">

                    <div style="text-align:right;font-weight:bold;">רישום משתמש: </div>

                    <div class="form-group">

                        <div class="form-group floating-label-form-group controls">

                            <input id="userCust" type="text" placeholder="שם משתמש" class="form-control input-lg" />

                        </div>

                    </div>

                    <div class="form-group">

                        <div class="form-group floating-label-form-group controls">

                            <input id="txtTelCust" type="number" maxlength="10" placeholder="טלפון נייד" class="form-control input-lg" />

                        </div>

                    </div>

                    <div class="form-group">

                        <div class="form-group floating-label-form-group controls">

                            <input id="emailCustomer" type="email" placeholder="מייל" class="form-control input-lg" />

                        </div>

                    </div>

                    <div class="form-group">

                        <div class="form-group floating-label-form-group controls">

                            <input id="passwordCustomer" type="password" placeholder="סיסמה (לפחות 8 ספרות ואותיות)" class="form-control input-lg" />

                        </div>

                    </div>
                    <div id="DvcityCust"></div>
                    <div class="form-group">

                        <div class="form-group floating-label-form-group controls">

                            <select id="cityCust" type="text" placeholder="עיר"></select>
                            
                        </div>

                    </div>

                    <div style="float:left;padding-left:0px;">

                        <div id="dvProgBar" style="text-align:center;display:none;"><img src="css/ProgressBlue.gif" /></div>

                        <div id="dvErrRegister"></div>

                        <button style="width:110px;" onclick="return RegisterToCustmer();" class="btn btn-blue">הרשמה</button>

                    </div>

                </div>

            </div>

        </div>

    </section>

    <section id="Register" style="margin-top:200px;padding:10px;">

        <div id="dvRegister" class="container">

            <div style="margin-top:50px;" class="row">

                <div>
                    <div>
                        <div style="text-align:right;font-weight:bold;">הרשמה של בעל העסק: </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="name" type="text" placeholder="שם" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="password" type="password" placeholder="סיסמה (לפחות 8 ספרות ואותיות)" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="email" type="email" placeholder="מייל" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="txtTel" type="number" maxlength="10" placeholder="טלפון" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="bizName" type="text" placeholder="שם עסק בעברית" class="form-control input-lg" />

                            </div>

                        </div>

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="bizNameEng" type="text" placeholder="שם עסק באנגלית" class="form-control input-lg" />

                            </div>

                        </div>

                        <!--<div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="creditCard" type="text" placeholder="כרטיס אשראי" class="form-control input-lg" />

                            </div>

                        </div>-->

                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <input id="address" type="text" placeholder="כתובת" class="form-control input-lg" />

                            </div>

                        </div>
                        <div id="dvCity"></div>
                        <div class="form-group">

                            <div class="form-group floating-label-form-group controls">

                                <select id="city" type="text" placeholder="עיר"></select>
                                
                            </div>

                        </div>

                        <div class="form-group">
                            <div class="form-group floating-label-form-group controls">
                                <input style="float:right;" type="checkbox" id="chkIsGroup"> <span style="float:right;margin-right:5px;">האם לאפשר לקבוצה לזמן תור</span>
                            </div>
                        </div>
                    </div>
                    <div style="clear:both;padding-top:15px; text-align:right">
                        <label>סוגי פעילויות</label><span style="color:red" id="spnActiveDays"></span>

                        <div class="row" style="width:100%" id="UserActivities"></div>

                        <div class="form-group" style="width:100%;padding-bottom:10px;padding-top:10px;">

                            <input style="float:right;width:140px;margin-bottom:10px;margin-right:3px;" maxlength="50" id="BizType" type="text" placeholder="הזן סוג פעילות" class="form-control input-lg" />
                            <input style="float:right;width:133px;margin-right:4px;" id="txtDuration" type="number" placeholder="משך פעילות" maxlength="3" class="form-control input-lg" />
                            
                            <select id="inputColor" style="float:right;width:55px;" class="form-control input-lg" onchange="changeColor(this)">
                                <option selected="selected" value="#3788d8" style="background:#3788d8">כחול</option>                                       
                                <option value="#7FDBFF" style="background:#7FDBFF">תכלת</option>
                                <option value="#B10DC9" style="background:#B10DC9">סגול</option>                            
                                <option value="#FF69B4" style="background:#FF69B4">ורוד</option>                            
                                <option value="#f37735" style="background:#f37735">כתום</option>                                
                                <option value="#2ECC40" style="background:#2ECC40">ירוק</option>                                
                                <option value="#aaaaaa" style="background:#aaaaaa">אפור</option>
                                <option value="#bdeaee" style="background:#bdeaee">טורקיז</option>
                                <option value="#A0522D" style="background:#A0522D">חום</option> 
                            </select>
                            <button onclick="AddUserActivity();" class="btn btn-blue btn-lg" style="float:right;margin-right:5px;">הוסף</button>

                        </div>
                        <div style="width:100%;padding-top:5px;float:right">
                            <label>ימי פעילות עובד</label><span style="color:red" id="spnActiveDays"></span>
                        </div>

                        <div class="row" style="width:100%" id="Activities"></div>

                        <div style="width:100%;padding-bottom:10px;padding-top:10px;">

                            <input style="float:right;width:273px;margin-bottom:10px;margin-right:3px;" maxlength="50" id="EmployeeName" type="text" placeholder="הזן שם עובד" class="form-control input-lg" />

                            <button onclick="AddActivity();" class="btn btn-blue btn-lg" style="float:right;margin-right:5px;">הוסף</button>

                        </div>
                        <div style="float:right; width:100%;padding-bottom:10px;padding-top:10px;" id="dvActivitiesSelection"></div>
                        <table class="table table-striped table-bordered">
                            <tr>
                                <td>יום</td>
                                <td>שעות פעילות</td>
                                <td>שעות לא פעילות</td>
                            </tr>
                            <tr>
                                <td style="width:100px;">
                                    <input type="checkbox" checked="checked" id="Day1"> א
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour1" data-toggle="tooltip" trigger="manual" data-placement="top" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour1" style="width:70px;" type="text" value="17:00" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone1" style="width:70px;" type="text" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone1" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width:100px;"><input type="checkbox" checked="checked" id="Day2"> ב</td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour2" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour2" style="width:70px;" type="text" value="17:00" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone2" style="width:70px;" type="text" placeholder="משעה " class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone2" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width:100px;"><input type="checkbox" checked="checked" id="Day3"> ג</td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour3" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour3" style="width:70px;" type="text" value="17:00" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone3" style="width:70px;" type="text" placeholder="משעה " class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone3" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width:100px;"><input type="checkbox" checked="checked" id="Day4"> ד</td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour4" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour4" style="width:70px;" type="text" value="17:00" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone4" style="width:70px;" type="text" placeholder="משעה " class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone4" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width:100px;"><input type="checkbox" checked="checked" id="Day5"> ה</td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour5" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour5" style="width:70px;" type="text" value="17:00" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone5" style="width:70px;" type="text" placeholder="משעה " class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone5" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width:100px;"><input type="checkbox" checked="checked" id="Day6"> ו</td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour6" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour6" style="width:70px;" type="text" value="13:00" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone6" style="width:70px;" type="text" placeholder="משעה " class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone6" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="width:100px;"><input type="checkbox" id="Day7"> ז</td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHour7" style="width:70px;" type="text" value="08:00" placeholder="משעה" class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHour7" style="width:70px;" type="text" value="17:00" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txtfromHourNone7" style="width:70px;" type="text" placeholder="משעה " class="form-control input-time" />
                                    </div>
                                    <div class="form-group floating-label-form-group controls">
                                        <input id="txttoHourNone7" style="width:70px;" type="text" placeholder="עד שעה" class="form-control input-time" />
                                    </div>
                                </td>
                            </tr>


                        </table>





                        <div style="float:left;padding-left:0px;">

                            <div id="dvProgBar" style="text-align:center;display:none;"><img src="css/ProgressBlue.gif" /></div>

                            <div id="dvErrRegister"></div>

                            <button style="width:110px;" onClick="Register();" class="btn btn-blue">הרשמה</button>

                        </div>

                    </div>

                </div>

            </div>

        </div>

    </section>

    <script src="js/jquery.js"></script>
    <script src="js/cleave.js"></script>
    <script src="js/bootstrap.min.js?v=2"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/device.min.js"></script>
    <script src="js/form.min.js"></script>
    <script src="js/jquery.placeholder.min.js"></script>
    <script src="js/jquery.shuffle.min.js"></script>
    <script src="js/jquery.parallax.min.js"></script>
    <script src="js/jquery.circle-progress.min.js"></script>
    <script src="js/jquery.swipebox.min.js"></script>
    <script src="js/smoothscroll.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/main.js?v=2"></script>
    <script src="js/selectize.js"></script>
    <script src="https://www.negishim.com/accessibility/accessibility_pro.js" type="text/javascript"></script>
</body>
</html>
<script>
    accessibility_rtl = false;
    pixel_from_side = 5;
    pixel_from_start = 10;
    is_set_for_mobile = 1;
    getScripts();

    function getScripts() {
        var v = sessionStorage.getItem("version");
        $.ajax({
            url: "js/global.js?ver=" + v,
            dataType: "script",
            success: function (data) {
                var url = new URL(location.href);
                var bizType = url.searchParams.get("p");

                SetHourToDddl();
                if (sessionStorage.getItem("remember_me") != "1" && localStorage.chkbx && localStorage.chkbx != '') {
                    Login();
                }
                getCities(function (data) {
                    selectizeService.InitSelectize("city", 'Id', 'Name', 46, data, null);
                    selectizeService.InitSelectize("cityCust", 'Id', 'Name', 46, data, null);
                });

                SetHour();
                if (bizType == 'biz') {
                    goToRegisterBiz('LoginSec');
                }
                if (bizType == 'cust') {
                    goToCustomer('LoginSec');
                }
                
                $('.carousel').bcSwipe({ threshold: 50 });
            }
        });


    }

    function goto(hashTag) {
        location.href = '#' + hashTag;;
    }

    

    function showProgressBar(isShow) {
        if (isShow)
            $("#dvProgBar").show();
        else
            $("#dvProgBar").hide();
    }


    function Register() {

        var user = $("#name").val();

        var password = $("#password").val();

        var email = $("#email").val();

        var bizName = $("#bizName").val();

        var bizNameEng = $("#bizNameEng").val();

        //var creditCard = $("#creditCard").val();

        var address = $("#address").val();

        var city = $("#city").val();

        var tel = $("#txtTel").val();
        var chkGrp = $('#chkIsGroup').is(":checked");

        $("#spnActiveDays").text("");


        if (user.length <= 0) {

            showTooltip("name", "נא להזין שם");

            return;

        }

        if (!IsValidText(user)) {

            showTooltip("name", "נא להזין שם חוקי");

            return;

        }



        if (password.length <= 0) {

            showTooltip("password", "נא להזין סיסמה");

            return;

        }



        if (password.length < 8) {

            showTooltip("password", "נא להזין לפחות 8 תווים");

            return;

        }

        if (password && !testPassword(password)) {
            showTooltip("password", "נא להזין תווים ומספרים");

            return;
        }

        if (email.length <= 0) {

            showTooltip("email", "נא להזין מייל");

            return;

        }

        if (tel.length <= 0) {

            showTooltip("txtTel", "נא להזין מספר טלפון נייד");

            return;

        }

        if (!IsvalidPhone(tel)) {

            showTooltip("txtTel", "נא להזין מספר טלפון נייד תקין");

            return;

        }

        if (!IsvalidEmail(email)) {

            showTooltip("email", "נא להזין מייל תקין");

            return;

        }



        if (bizName.length <= 0) {

            showTooltip("bizName", "נא להזין שם עסק");

            return;

        }

        if (!IsValidText(bizName)) {

            showTooltip("bizName", "נא להזין שם חוקי");

            return;

        }



        if (bizNameEng.length <= 0) {

            showTooltip("bizNameEng", "נא להזין שם עסק באנגלית");

            return;

        }

        if (!IsValidEngText(bizNameEng)) {

            showTooltip("bizNameEng", "נא להזין שם עסק באנגלית");

            return;

        }

        //if (creditCard.length <= 0) {

        //    showTooltip("creditCard", "נא להזין כרטיס אשראי ");

        //    return;

        //}



        if (address.length <= 0) {

            showTooltip("address", "נא להזין כתובת");

            return;

        }

        if (!IsValidAddress(address)) {

            showTooltip("address", "נא להזין כתובת חוקית");

            return;

        }



        if (city == "" || city == "0") {

            showTooltip("dvCity", "נא להזין עיר");
            $("#address").focus();
            return;

        }


        var UserActivitiesDiv = $("#UserActivities").html();
        if (UserActivitiesDiv.length == 0) {
            showTooltip("BizType", "נא להזין סוג פעילות");
        }

        if (isEmptyObject(ActivitiesData)) {

            showTooltip("EmployeeName", "נא להזין שם עובד")

            return;

        }


        var userObj = {

            User: user,

            Password: password,

            Email: email,

            tel: tel,

            BizName: bizName,

            BizNameEng: bizNameEng,

            Adrress: address,

            City: city,

            Country: "Israel",

            CreditCard: "1",
            IsGroup: chkGrp,
            dicBizType: ActivitiesData,
            UserActivities: ActivitiesUserData,
            UserActivitiesColor:ActivitiesUserColor,
            dicEmployeeActivities: ActivitiesEmployeeData
        }



        $.ajax({

            url: "User/Register",

            type: 'POST',

            data: JSON.stringify(userObj),

            contentType: "application/json;charset=utf-8",

            success: function (data) {

                if (data.ErrorMsg == null || data.ErrorMsg == "") {

                    messageHandler.Show("נשלח אליך מייל, אנא לחץ על הקישור עלמנת להתחבר למערכת.");
                    goToCustomer('LoginSec');
                }
                else

                    messageHandler.Show(data.ErrorMsg);

            },

            error: function (request, status, error) {



            }

        });


    }



    var ActivitiesData = {};
    var ActivitiesEmployeeData = {};
    var ActivitiesUserData = {};
    var ActivitiesUserDataHelper = {};
    var ActivitiesUserColor = {};

    function GetBizTypeItem() {

        return { EmployeeId: 0, ActiveDay: 0, EmployeeName: "", ActiveHourFrom: "", ActiveHourTo: "", ActiveHourFromNone: "", ActiveHourToNone: "" };

    }


    function checkValidDDl(txtId, textMsg) {

        $('#' + txtId).tooltip('hide');

        var txt = $("#" + txtId).val();

        if (txt == "0" || txt == "") {

            //showTooltip(txtId, textMsg);

            $('#' + txtId).tooltip({

                title: textMsg

            });

            $('#' + txtId).tooltip('show');

            $('#' + txtId).focus();

            return false;

        }

        return true;

    }




    var ActivityCounter = 1;
    function AddActivity() {

        var data = "";

        var ActivitiesTempData = new Array();

        if (!checkValid("EmployeeName", "נא להזין שם עובד")) {
            return;
        }
        var emp = $('#EmployeeName').val();
        if (!IsValidTextAndNumbers(emp)) {
            showTooltip("EmployeeName", "נא להזין טקסט חוקי");
            return;
        }
        if ($('#dvActivitiesSelection').html() == "") {
            showTooltip('BizType', "נא להזין פעילות");
            return;
        }
        var z = 0;
        var activity = "";
        var ind = 0;
        for (var x in ActivitiesUserData) {
            activity = x;
            ind = ActivitiesUserDataHelper[x];
            if ($('#chk_' + ind).is(":checked")) {
                z++;
            }
        }

        if (z == 0) {
            showTooltip('chk_' + ind, "נא לבחור לפחות פעילות אחת לעובד");
            return;
        }
        for (var i = 1; i <= 7; i++) {

            var id = i.toString();

            var Day = document.getElementById('Day' + id).checked;


            if (Day) {



                if (!checkValid("txtfromHour" + id, "נא להזין משעה")) {

                    return;

                }

                if (!checkHour("txtfromHour" + id, "שעה לא חוקית")) {

                    return;

                }

                if (!checkValid("txttoHour" + id, "נא להזין עד שעה")) {

                    return;

                }

                if (!checkHour("txttoHour" + id)) {

                    return;

                }

                var item = GetBizTypeItem();

                item.EmployeeId = ActivityCounter;
                item.EmployeeName = $('#EmployeeName').val();

                item.ActiveDay = id;

                //item.ActiveDuration = $('#ddlDuration' + id).val();

                item.ActiveHourFrom = $('#txtfromHour' + id).val();

                item.ActiveHourTo = $('#txttoHour' + id).val();

                item.ActiveHourFromNone = $('#txtfromHourNone' + id).val();

                item.ActiveHourToNone = $('#txttoHourNone' + id).val();

                ActivitiesTempData.push(item);
            }

        }

        if (ActivitiesData[item.EmployeeName] == null) {

            var index = ActivitiesData.length;

            ActivitiesData[item.EmployeeName] = ActivitiesTempData;

            var activities = " ";
            var arrActs = [];
            for (var x in ActivitiesUserData) {
                ind = ActivitiesUserDataHelper[x];
                if ($('#chk_' + ind).is(":checked")) {
                    activities += x + ", ";
                    arrActs.push(x);
                }
            }
            ActivitiesEmployeeData[ActivityCounter] = arrActs;
            activities = activities.substring(0, activities.length - 2);
            data = "<div style='width:100%;' id='dvBizType" + ActivityCounter + "'><div id='dvBizTypeName" + ActivityCounter + "' style='float:right;width:120px;padding-right:20px;'>" + item.EmployeeName + "</div><div style='float:right;width:120px;padding-right:10px;'>(" + activities + ")</div><button style='float:right;marging-right:4px;' onclick=deleteBizType('" + ActivityCounter + "')>מחק</button></div>";


            var newDiv = $("#Activities").html();

            ActivityCounter++;

            $("#Activities").html(newDiv + data);

            $('#EmployeeName').val("");

        }

    }



    function deleteBizType(i) {
        var name = $('#dvBizTypeName' + i).html();
        delete ActivitiesData[name];
        delete ActivitiesEmployeeData[i];
        $('#dvBizType' + i).remove();

    }



    function isEmptyObject(obj) {

        for (var name in obj) {

            return false;

        }

        return true;

    }


    function RegisterToCustmer() {
        var city = $("#cityCust").val();
        var user = $("#userCust").val();

        var password = $("#passwordCustomer").val();

        var email = $("#emailCustomer").val();

        var txtTelCust = $("#txtTelCust").val();
        if (user.length <= 0) {

            showTooltip("userCust", "נא להזין שם");

            return false;

        }
        if (!IsValidText(user)) {
            showTooltip("userCust", "נא להזין שם חוקי");
            return false;

        }
        if (txtTelCust.length <= 0) {

            showTooltip("txtTelCust", "נא להזין טלפון נייד");

            return false;

        }
        if (!IsvalidPhone(txtTelCust)) {

            showTooltip("txtTelCust", "נא להזין מספר טלפון נייד תקין");

            return;

        }
        if (email.length <= 0) {

            showTooltip("emailCustomer", "נא להזין מייל");

            return false;

        }


        if (!IsvalidEmail(email)) {

            showTooltip("emailCustomer", "נא להזין מייל תקין");

            $("#emailCustomer").val("");

            return false;

        }

        if (password.length <= 0) {

            showTooltip("passwordCustomer", "נא להזין סיסמה");

            return false;

        }



        if (password.length < 8) {

            showTooltip("passwordCustomer", "נא להזין לפחות 8 תווים");

            $("#passwordCustomer").val("");

            return false;

        }

        if (password && !testPassword(password)) {
            showTooltip("passwordCustomer", "נא להזין תווים ומספרים");

            return false;
        }

        if (city == "" || city == "0") {

            showTooltip("DvcityCust", "נא להזין עיר");
            $("#passwordCustomer").focus();
            return;

        }

        var userObj = {

            Name: user,

            Password: password,

            tel: txtTelCust,

            Email: email,
            City: city

        }

        $.ajax({

            url: "User/RegisterCustmer",

            type: 'POST',

            data: JSON.stringify(userObj),

            contentType: "application/json;charset=utf-8",

            success: function (data) {

                if (data.ErrorMsg != "" && data.ErrorMsg != null)
                    messageHandler.Show(data.ErrorMsg);
                else {
                    messageHandler.Show("נשלח אליך מייל, אנא לחץ על הקישור עלמנת להתחבר למערכת.");
                    $("#passwordCustomer").val("");
                    $("#emailCustomer").val("");
                    $("#txtTelCust").val("");
                    $("#userCust").val("");
                    goToCustomer('LoginSec');
                }

            },

            error: function (request, status, error) {



            }

        });

    }

    function getObjectIndex(dic, objKey) {
        var index = 0;
        for (var key in dic) {
            if (key == objKey)
                return index;
            index++;
        }
    }
    function AddUserActivity() {

        var data = "";
        var color = document.getElementById("inputColor").value;

        var ActivitiesTempData = new Array();
        var bizType = $('#BizType').val();
       
        if (bizType.length == 0) {
            showTooltip("BizType", "נא להזין שם פעילות");
            return;
        }

        if (bizType.length < 2) {
            showTooltip("BizType", "נא להזין לפחות 2 אותיות");
            return;
        }
        if (!IsValidTextAndNumbers(bizType)) {
            showTooltip("BizType", "נא להזין טקסט חוקי");
            return;
        }
        if (!checkValid("txtDuration", "נא להזין משך פעילות בדקות")) {
            return;
        }
        var Duration = $('#txtDuration').val();

        if (Duration <= 0) {
            showTooltip("txtDuration", "נא להזין מספר גדול מאפס");
            return;
        }

        if (Duration.length > 3) {
            showTooltip("txtDuration", "נא להזין מקסימום 720 דקות");
            return;
        }

        if (ActivitiesUserData != null) {
            if (ActivitiesUserData[bizType] != null) {
                showTooltip("BizType", "נא להזין שם פעילות שונה");
                return;
            }
        }
        var ind = 0;
        if (ActivitiesUserData[bizType] == null) {

            ActivitiesUserData[bizType] = Duration;
            ind = getObjectIndex(ActivitiesUserData, bizType);
            ActivitiesUserDataHelper[bizType] = ind;
            ActivitiesUserColor[bizType] = color;            
            data = "<div style='width:100%;' id='dvBizTypeAct" + ind + "'><div style='float:right;width:260px;padding-right:20px;color:" + color + "'>" + bizType + " למשך  " + ActivitiesUserData[bizType] + " דקות</div><button style='float:right;marging-right:4px;' onclick=deleteBizTypeActivity('" + ind + "')>מחק</button></div>";

            var newDiv = $("#UserActivities").html();

            $("#UserActivities").html(newDiv + data);
            $('#BizType').val("");
            $('#txtDuration').val("");
        }
        var s1 = "<div id='dvAddedAct" + ind + "' style='text-align:right;color:#007bff'><label style='width:120px;' for='chk_" + ind + "'>" + bizType + "</label><input id='chk_" + ind + "' type='checkbox' value='" + bizType + "' /></div>";

        $("#dvActivitiesSelection").append(s1);
    }
    function deleteBizTypeActivity(i) {
        var keyDel = "";
        for (var key in ActivitiesUserDataHelper) {
            if (ActivitiesUserDataHelper[key] == i) {
                keyDel = key;
                break
            }
        }
        delete ActivitiesUserData[keyDel];
        delete ActivitiesUserDataHelper[keyDel];
        delete ActivitiesUserColor[keyDel];

        $('#dvBizTypeAct' + i).remove();
        $('#dvAddedAct' + i).remove();
    }



    InitCust();
    function goToCustomer(id) {

        InitCust();
        scrollToSection(id);
        window.location.hash = id;
    }
    function InitCust() {
        $('#Register').hide();
        $('#RegisterCustomerX').show();
        $('#btnRegisterCustomer').show();

        $('#btnRegister').hide();
    }
    function goToRegisterBiz(id) {

        $('#Register').show();
        $('#RegisterCustomerX').hide();
        $('#btnRegister').show();
        $('#btnRegisterCustomer').hide();
        scrollToSection(id);
        window.location.hash = id;
    }
    function goToUrl(url) {
        var v = sessionStorage.getItem("version");
        location.href = url + '?v=' + v;
    }

    function scrollToSection(id) {
        setTimeout(function () {
            $([document.documentElement, document.body]).animate({
                scrollTop: $("#" + id).offset().top
            }, 1400);
        }, 100);
    }


    function LoginMe() {
        localStorage.usrname = "";
        localStorage.pass = "";
        localStorage.chkbx = "";
        Login();
    }

    document.getElementById("inputColor").style.background = "#3788d8";
    function changeColor(obj) {
        obj.style.background = obj.value;
    }

    var sWidth = screen.width;
    if (sWidth > 500) {
        document.getElementById("dvBackImage").style.backgroundImage = 'url(img/toriBigX3.jpg)';
        document.getElementById("dvBackImage").style.backgroundPosition = "50% 50%";
        document.getElementById("dvBackImage").style.backgroundSize = "100% cover!important";
        document.getElementById("dvBackImage").style.overflow = "hidden";
        document.getElementById("dvBackImage").style.display = "block";
        document.getElementById("dvBackImage").style.margin = "auto 0";
        var divideBy = sWidth > 1200 ? 3 : 2;
        var MinusBy = sWidth > 1200 ? 230 : 320;
        var sw = sWidth / divideBy;

        document.getElementById("emailLogin").style.width = sw + "px";
        document.getElementById("passwordLogin").style.width = sw + "px";
        document.getElementById("btnLogin").style.width = sw + "px";
        var pos = $('#passwordLogin').offset();
        document.getElementById("dvForgutPass").style.marginRight = (sw - MinusBy) + "px";
        var w = $('#passwordLogin').innerWidth();
        document.getElementById("spnForgutPass").style.marginRight = (sw - (w - 100)) + "px";
        document.getElementById("dvLogin").style.marginTop = "60px";
        pixel_from_start = 40;
        document.getElementById("logo1").style.marginLeft = "10px";
        document.getElementById("logo2").style.marginLeft = "10px";
        document.getElementById("dvRegisterCustomerX").style.width = "50%";
        document.getElementById("dvRegister").style.width = "50%";
    }
    else {
        document.getElementById("spnForgutPass").style.float = "left";
    }

</script>
